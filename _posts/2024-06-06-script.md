---
title: 游닆 Creaci칩n del Script
author: mgrl39
date: 2024-06-06
category: Jekyll
layout: post
---

### 1. Creaci칩n del Script

1. Primero, aseg칰rate de estar en el usuario root. Verifica tu ubicaci칩n actual con el comando `pwd`. Luego, mu칠vete al directorio `/root`, donde guardaremos nuestro script:

    ```bash
    cd /root
    ```

    Crea el archivo del script llamado **monitoring.sh** y 치brelo para editar con `vim` (puedes usar cualquier editor de texto que prefieras):

    ```bash
    vim monitoring.sh
    ```

    Recuerda que debes estar en el usuario root. Si no lo est치s, ejecuta `sudo su`.

    ![Imagen 189](https://raw.githubusercontent.com/mgrl39/Born2BeRoot/main/steps/b2br_img_189.png)  

2. Escribe el contenido del script en el archivo. Puedes copiar el contenido del script desde [aqu칤](https://raw.githubusercontent.com/mgrl39/Born2BeRoot/main/monitoring.sh) o descargarlo directamente a tu m치quina con el siguiente comando (si prefieres copiar el contenido manualmente, salta este paso):

    ```bash
    sudo apt install curl -y && curl -O https://raw.githubusercontent.com/mgrl39/Born2BeRoot/main/monitoring.sh
    ```

    ![Imagen 190](https://raw.githubusercontent.com/mgrl39/Born2BeRoot/main/steps/b2br_img_190.png)  

3. Guarda y cierra el archivo `monitoring.sh`, luego ejecuta el script:

    ```bash
    sh monitoring.sh
    ```

    ![Imagen 191](https://raw.githubusercontent.com/mgrl39/Born2BeRoot/main/steps/b2br_img_191.png)  

---

### 2. Configuraci칩n del Cron Job

1. Para que el script se ejecute autom치ticamente cada cierto tiempo, necesitamos configurar un cron job. Abre el archivo crontab para el usuario root:

    ```bash
    sudo crontab -u root -e
    ```

    ![Imagen 193](https://raw.githubusercontent.com/mgrl39/Born2BeRoot/main/steps/b2br_img_193.png)  

2. Si es la primera vez que editas el archivo crontab, se te preguntar치 qu칠 editor quieres usar. Puedes seleccionar `nano` o el que prefieras.

    ![Imagen 192](https://raw.githubusercontent.com/mgrl39/Born2BeRoot/main/steps/b2br_img_192.png) 

3. A침ade la siguiente l칤nea al final del archivo para que el script se ejecute cada 10 minutos:

    ```bash
    */10 * * * * sh /root/monitoring.sh
    ```

    **Explicaci칩n de los par치metros:**

    | Par치metro | Descripci칩n                                                                                                                                          |
    |-----------|------------------------------------------------------------------------------------------------------------------------------------------------------|
    | **m**     | El minuto en que se ejecutar치 el script, el valor va de 0 a 59.                                                                                     |
    | **h**     | La hora en formato de 24 horas, valores de 0 a 23.                                                                                                 |
    | **dom**   | El d칤a del mes. Por ejemplo, 15 para el d칤a 15 de cada mes.                                                                                         |
    | **dow**   | El d칤a de la semana, num칠rico (0 a 7, donde 0 y 7 son domingo) o las primeras tres letras en ingl칠s.                                               |
    | **user**  | El usuario que ejecutar치 el comando. Si no se especifica, usar치 el usuario predeterminado del entorno.                                                |
    | **command** | El comando o la ruta absoluta del script a ejecutar.                                                                                               |

    En este caso:

    | Par치metro  | Valor                | Descripci칩n                                                                |
    |------------|----------------------|----------------------------------------------------------------------------|
    | **m**      | `*/10`               | El script se ejecutar치 cada 10 minutos.                                    |
    | **h**      | `*`                  | Cualquier hora.                                                            |
    | **dom**    | `*`                  | Cualquier d칤a del mes.                                                     |
    | **dow**    | `*`                  | Cualquier d칤a de la semana.                                                 |
    | **user**   | *No especificado*    | Se usar치 el usuario predeterminado.                                        |
    | **command**| `sh /root/monitoring.sh` | Comando para ejecutar el script ubicado en `/root/monitoring.sh`.          |

    ![Imagen 194](https://raw.githubusercontent.com/mgrl39/Born2BeRoot/main/steps/b2br_img_194.png)  

4. Guarda y cierra el archivo crontab. Verifica que el cron job se haya a침adido correctamente:

    ```bash
    crontab -l
    ```

    ![Imagen 195](https://raw.githubusercontent.com/mgrl39/Born2BeRoot/main/steps/b2br_img_195.png)  
